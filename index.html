<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le0Flix - Streaming Films</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(to bottom, purple, black);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        header {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 30px 20px;
            position: relative;
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        #logo {
            max-width: 250px;
            height: auto;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }
        #search {
            margin-top: 20px;
            padding: 15px 20px;
            width: 90%;
            max-width: 500px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }
        #search::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        #search:focus {
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        #settings {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 15px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #settings:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        #modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        #modal-content h2 {
            margin-bottom: 20px;
        }
        #modal-content button {
            margin: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #modal-content button:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        #video-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }
        #video-modal-content {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 20px;
            max-width: 90%;
            width: 800px;
            text-align: center;
        }
        #video-modal video {
            width: 100%;
            max-height: 500px;
        }
        #close-video {
            margin-top: 10px;
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
        }
        #movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            padding: 40px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .movie-card {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
        }
        .movie-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
        }
        .movie-card video {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }
        .movie-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            padding: 15px;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        .movie-card:hover .movie-overlay {
            transform: translateY(0);
        }
        .movie-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .movie-duration {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }
        #no-results {
            display: none;
            text-align: center;
            padding: 50px;
            font-size: 18px;
            color: rgba(255, 255, 255, 0.7);
        }
        @media (max-width: 768px) {
            #movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            #logo {
                max-width: 200px;
            }
            .movie-card video {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <header>
        <img id="logo" src="https://i.ibb.co/DgKW2C56/Black-White-Bold-Modern-Studio-Logo-20260101-135423-0000-removebg-preview.png" alt="XalaFlix Logo">
        <input type="text" id="search" placeholder="Rechercher par titre ou durée (ex: 2h)...">
        <button id="settings">Paramètres</button>
    </header>
    <div id="modal">
        <div id="modal-content">
            <h2>Paramètres</h2>
            <button id="theme-toggle">Changer Thème</button>
            <button id="grid-toggle">Changer Grille</button>
            <button id="close-modal">Fermer</button>
        </div>
    </div>
    <div id="video-modal">
        <div id="video-modal-content">
            <video id="video-player" controls></video>
            <button id="close-video">Fermer</button>
        </div>
    </div>
    <div id="no-results">Aucun film trouvé pour votre recherche.</div>
    <div id="movies-grid"></div>

    <script>
        let isCompact = false;

        // Charger les films depuis movies.json
        fetch('movies.json')
            .then(response => response.json())
            .then(data => {
                const grid = document.getElementById('movies-grid');
                const searchInput = document.getElementById('search');
                const noResults = document.getElementById('no-results');

                // Fonction pour afficher les films
                function displayMovies(movies) {
                    grid.innerHTML = '';
                    if (movies.length === 0) {
                        noResults.style.display = 'block';
                        return;
                    }
                    noResults.style.display = 'none';
                    movies.forEach(movie => {
                        const card = document.createElement('div');
                        card.className = 'movie-card';
                        card.innerHTML = `
                            <video preload="none" muted>
                                <source src="${movie.lien}" type="video/mp4">
                            </video>
                            <div class="movie-overlay">
                                <div class="movie-title">${movie.titre}</div>
                                <div class="movie-duration">${movie.duree}</div>
                            </div>
                        `;
                        grid.appendChild(card);

                        // Hover pour prévisualiser
                        const video = card.querySelector('video');
                        card.addEventListener('mouseenter', () => {
                            video.play();
                        });
                        card.addEventListener('mouseleave', () => {
                            video.pause();
                            video.currentTime = 0;
                        });

                        // Clic pour ouvrir le lecteur
                        card.addEventListener('click', () => {
                            const videoModal = document.getElementById('video-modal');
                            const videoPlayer = document.getElementById('video-player');
                            videoPlayer.src = movie.lien;
                            videoModal.style.display = 'flex';
                        });
                    });
                }

                // Afficher tous les films au départ
                displayMovies(data);

                // Recherche dynamique
                searchInput.addEventListener('input', () => {
                    const query = searchInput.value.toLowerCase();
                    const filteredMovies = data.filter(movie => 
                        movie.titre.toLowerCase().includes(query) || 
                        movie.duree.toLowerCase().includes(query)
                    );
                    displayMovies(filteredMovies);
                });

                // Paramètres
                const modal = document.getElementById('modal');
                const settingsBtn = document.getElementById('settings');
                const closeModal = document.getElementById('close-modal');
                const themeToggle = document.getElementById('theme-toggle');
                const gridToggle = document.getElementById('grid-toggle');
                const videoModal = document.getElementById('video-modal');
                const closeVideo = document.getElementById('close-video');

                settingsBtn.addEventListener('click', () => {
                    modal.style.display = 'flex';
                });
                closeModal.addEventListener('click', () => {
                    modal.style.display = 'none';
                });
                themeToggle.addEventListener('click', () => {
                    document.body.style.background = document.body.style.background === 'linear-gradient(to bottom, purple, black)' ? 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)' : 'linear-gradient(to bottom, purple, black)';
                });
                gridToggle.addEventListener('click', () => {
                    isCompact = !isCompact;
                    grid.style.gridTemplateColumns = isCompact ? 'repeat(auto-fill, minmax(200px, 1fr))' : 'repeat(auto-fill, minmax(280px, 1fr))';
                });
                closeVideo.addEventListener('click', () => {
                    videoModal.style.display = 'none';
                    document.getElementById('video-player').pause();
                });
            })
            .catch(error => console.error('Erreur lors du chargement des films:', error));
    </script>
</body>
</html>
