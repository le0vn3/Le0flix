<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Le0flix</title>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; background:#0f0c29; color:white; min-height:100vh; overflow-x:hidden; }
header { display:flex; flex-direction:column; align-items:center; padding:20px; position:sticky; top:0; background:rgba(255,255,255,0.1); backdrop-filter:blur(15px); border-bottom:1px solid rgba(255,255,255,0.2); }
#logo { max-width:200px; height:auto; margin-bottom:15px; }
#search { width:90%; max-width:400px; padding:12px 20px; border-radius:25px; border:none; background:rgba(255,255,255,0.2); color:white; outline:none; }
#search::placeholder { color: rgba(255,255,255,0.7); }
#settings { position:absolute; top:20px; right:20px; background:rgba(255,255,255,0.2); padding:8px 12px; border-radius:20px; cursor:pointer; }
#movies-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; padding:20px; max-width:1200px; margin:0 auto; }
.movie-card { position:relative; border-radius:15px; overflow:hidden; background:rgba(255,255,255,0.05); backdrop-filter:blur(10px); cursor:pointer; transition:0.3s; }
.movie-card:hover { transform:translateY(-5px) scale(1.02); }
.movie-card img { width:100%; height:200px; object-fit:cover; display:block; }
.movie-overlay { position:absolute; bottom:0; width:100%; background:rgba(0,0,0,0.6); text-align:center; padding:10px; transition:0.3s; }
.movie-card:hover .movie-overlay { background:rgba(0,0,0,0.8); }
#video-modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:1000; }
#video-modal video { width:90%; max-width:800px; border-radius:15px; }
#close-video { margin-top:10px; padding:8px 15px; border:none; border-radius:10px; background:rgba(255,255,255,0.2); color:white; cursor:pointer; }
#modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); backdrop-filter:blur(10px); justify-content:center; align-items:center; z-index:1000; }
#modal-content { background:rgba(255,255,255,0.1); backdrop-filter:blur(15px); padding:30px; border-radius:20px; text-align:center; }
#modal-content button { margin:5px; padding:8px 15px; border:none; border-radius:10px; cursor:pointer; }
#no-results { display:none; text-align:center; padding:40px; color:rgba(255,255,255,0.7); }
.dark-theme { background:#1a1a1a; }
.compact-grid #movies-grid { grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }
@media(max-width:768px){ .movie-card img{ height:150px; } #logo{ max-width:150px; } }
</style>
</head>
<body>

<header>
<img id="logo" src="https://i.ibb.co/DgKW2C56/Black-White-Bold-Modern-Studio-Logo-20260101-135423-0000-removebg-preview.png" alt="Le0flix">
<input id="search" placeholder="Rechercher un film...">
<button id="settings">Paramètres</button>
</header>

<div id="modal">
<div id="modal-content">
<h2>Paramètres</h2>
<button id="theme-toggle">Changer thème</button>
<button id="grid-toggle">Changer grille</button>
<button id="close-modal">Fermer</button>
</div>
</div>

<div id="video-modal">
<div id="video-modal-content">
<video id="video-player" controls></video>
<button id="close-video">Fermer</button>
</div>
</div>

<div id="no-results">Aucun film trouvé.</div>
<div id="movies-grid"></div>

<script>
let movies=[];

function loadMovies(){
  fetch('movies.json?cache=' + new Date().getTime()) // <- force update
    .then(r=>r.json())
    .then(data=>{
      movies=data;
      renderMovies(movies);
    })
    .catch(err=>{
      console.error('Erreur:', err);
    });
}

function renderMovies(arr){
  const grid=document.getElementById('movies-grid');
  const noResults=document.getElementById('no-results');
  grid.innerHTML='';
  if(arr.length===0){ noResults.style.display='block'; return; } else { noResults.style.display='none'; }
  arr.forEach(movie=>{
    const card=document.createElement('div');
    card.className='movie-card';
    card.innerHTML=`<img src="${movie.image}" alt="${movie.titre}"><div class="movie-overlay"><div>${movie.titre}</div><div>${movie.duree}</div></div>`;
    grid.appendChild(card);
    card.onclick=()=>{
      const videoModal=document.getElementById('video-modal');
      const videoPlayer=document.getElementById('video-player');
      videoPlayer.src=movie.lien;
      videoModal.style.display='flex';
    }
  });
}

// Search
const searchInput=document.getElementById('search');
searchInput.addEventListener('input',()=>{
  const q=searchInput.value.toLowerCase();
  renderMovies(movies.filter(m=>m.titre.toLowerCase().includes(q) || m.duree.toLowerCase().includes(q)));
});

// Paramètres
const modal=document.getElementById('modal');
const settingsBtn=document.getElementById('settings');
const closeModal=document.getElementById('close-modal');
const themeToggle=document.getElementById('theme-toggle');
const gridToggle=document.getElementById('grid-toggle');
settingsBtn.addEventListener('click',()=>{ modal.style.display='flex'; });
closeModal.addEventListener('click',()=>{ modal.style.display='none'; });
themeToggle.addEventListener('click',()=>{ document.body.classList.toggle('dark-theme'); });
gridToggle.addEventListener('click',()=>{ document.body.classList.toggle('compact-grid'); });

// Fermer le lecteur
document.getElementById('close-video').addEventListener('click',()=>{
  const player=document.getElementById('video-player');
  player.pause();
  document.getElementById('video-modal').style.display='none';
});

loadMovies();
</script>
</body>
</html>
